[build-system]
build-backend = "maturin"
requires = ["maturin>=1.3,<2.0"]

[tool.coverage.report]
exclude_lines = [
  'pragma: no cover',
  'raise NotImplementedError',
  'if TYPE_CHECKING:',
  'if typing.TYPE_CHECKING:'
]
precision = 2

[tool.mypy]
python_version = "3.9"
strict = true

[project]
authors = [{name = "JÃ©rome Eertmans", email = "jeertmans@icloud.com"}]
classifiers = [
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3.9",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "License :: OSI Approved :: MIT License",
  "Operating System :: OS Independent",
  "Topic :: Scientific/Engineering",
  "Programming Language :: Rust",
  "Programming Language :: Python :: Implementation :: CPython",
  "Programming Language :: Python :: Implementation :: PyPy"
]
dynamic = ["readme", "version"]
license = {file = "LICENSE.md"}
name = "DiffeRT"
requires-python = ">=3.9"

description = "Differentiable Ray Tracing Toolbox for Radio Propagation Simulations"
exclude = ["docs/", "static/"]
keywords = ["ray tracing", "differentiable", "propagation", "radio", "jax"]
version = "0.0.5"

dependencies = [
    "chex=^0.1.84",
    "jax=^0.4.20",
    "jaxtyping=^0.2.23",
    "matplotlib=^3.8.1",
    "numpy=^1.26.1",
    "plotly=^5.18.0",
]

[project.urls]
homepage = "https://github.com/jeertmans/DiffeRT"
documentation = "https://eertmans.be/DiffeRT"
repository = "https://github.com/jeertmans/DiffeRT"

[project.optional-dependencies]
dev = [
    "bump2version=^1.0.1",
    "pre-commit=^3.5.0",
]
docs = [
"myst-nb=^0.17.2",
"sphinx=<7",
"sphinx-autodoc-typehints=^1.23",
"sphinx-book-theme=^1.0.1",
"sphinx-copybutton=^0.5.2",
"sphinx-design=^0.5.0",
"sphinx-remove-toctrees=^0.0.3",
"sphinxext-opengraph=^0.9.0",
]
github-action = [
  "jax[cpu]=^0.4.20",
]
test = [
  "pytest=^7.4.3",
  "pytest-benchmark=^4.0.0",
  "pytest-cov=^4.1.0",
  "pytest-xdsit=^3.3.1",
  "tomli=^2.0.1",
]


[tool.pytest.ini_options]
addopts = [
  '--doctest-modules',
  '--doctest-ignore-import-errors',
  '--benchmark-columns',
  'min,mean,stddev,outliers,rounds,iterations',
  '--benchmark-group-by',
  'group',
  '--benchmark-warmup',
  'on',
  '--benchmark-skip'
]

[tool.ruff]
extend-ignore = [
  "D203",  # no-blank-line-before-class
  "D212",  # multi-line-summary-second-line
  "D407",  # Missing dashed underline after section
  "F722"  # Syntax error in forward annotation
]
extend-include = ["*.ipynb"]
extend-select = ["B", "C90", "D", "I", "N", "RUF", "UP", "T"]
isort = {known-first-party = ["differt", "tests"]}
target-version = "py39"

[tool.ruff.pydocstyle]
convention = "google"
